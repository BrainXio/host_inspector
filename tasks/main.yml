---
# tasks file for brainxio.host_inspector
- name: Prepare Inspection
  block:
    - name: Ensure directories exist
      ansible.builtin.file:
        path: "{{ item }}"
        state: directory
        owner: "{{ lookup('env', 'USER') }}"
        group: "{{ lookup('env', 'USER') }}"
        mode: "0755"
      loop:
        - "{{ logging_path }}"
        - "{{ data_path }}"
      delegate_to: localhost
      run_once: true

- name: Host Inspection
  block:
    - name: Load host inspector
      host_inspector:
      register: hello

    - name: Host inspector hello
      ansible.builtin.debug:
        var: hello.msg

    - name: Include host inspector tasks
      ansible.builtin.include_tasks: host_inspector.yml
